@using BlazorAgenda.Client.Viewmodels
@using BlazorAgenda.Client.Views;
@using BlazorAgenda.Shared.Models
@page "/"
@inherits AgendaViewmodel

<h1>Blazor agenda</h1>

    @if (!IsLoginCompleted)
    {
        <LoginView OnLogin=OnLoginCompleted/>
    }
    else
    {
        if (isLoaded)
        {
            <button onclick=@AddEvent>Show</button>
            <button onclick=@EditUser>Edit user</button>
            if (StateService.ObjectFocus == typeof(User))
            {
                <UserView SetUser=StateService.LoginUser OnClose=OnCloseDialog/>
            }
            else if (StateService.ObjectFocus == typeof(Event))
            {
                <EventView/>
            }
            <ContactsView />
            <PopupView ref="_popup" Animation="PopupView.AnimationType.FadeIn" Title="A Popup Demo Title" />
        }
        <CalendarView Loaded="@isLoaded" LoadedChanged="@ChildLoadedEvent" />
    }
</div>
