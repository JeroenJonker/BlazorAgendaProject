@using BlazorAgenda.Services.Interfaces
@using BlazorAgenda.Shared.Models
@inject IStateService Service

<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <a class="navbar-brand">Hello @Service.LoginUser.Firstname</a>
    <span class="navbar-text mr-auto">
        Blazor agenda
    </span>
    <ul class="navbar-nav">
        <li class="nav-item" onclick=@EditUser>
            <a class="nav-link"><span class="oi oi-person"></span> Edit profile </a>
        </li>
        <li class="nav-item" onclick=@Logout>
            <a class="nav-link">
                <span class="oi oi-account-logout"></span> Logout
            </a>
        </li>
    </ul>
</nav>

<UserView CurrentObject=@Service.LoginUser OnClose=@OnCloseDialog IsVisible=@(Service.ObjectFocus == typeof(User)) />

@functions
{
    public void EditUser()
    {
        Service.ObjectFocus = typeof(User);
    }

    public void OnCloseDialog()
    {
        Service.ObjectFocus = null;
        //StateHasChanged();
    }

    public void Logout()
    {
        Service.ResetState();
        Service.NotifyStateChanged();
    }
}
